<!DOCTYPE html>
<html lang="en">

  <head>
  <title>SkyRun</title>
  <link rel="stylesheet" href="/style.css">
  <meta name="viewport" content="width = device-width, height = device-height">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Silkscreen&display=swap" rel="stylesheet">
  <meta charset="utf-8">
  <link rel="apple-touch-icon" sizes="180x180" href="/fav/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/fav/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/fav/favicon-16x16.png">
  <link rel="manifest" href="/fav/site.webmanifest">

  <!-- Yandex SDK only inside Yandex container/iframe -->
  <script>
    (function(){
      try{
        var inIframe = typeof window !== 'undefined' && window.parent && window.parent !== window;
        var ref = (typeof document !== 'undefined' && document.referrer) ? document.referrer : '';
        var onYandexHost = /yandex\./i.test(ref) || /yandex\./i.test((location && location.hostname) || '');
        if (inIframe || onYandexHost) {
          var s=document.createElement('script');
          s.src='https://yandex.ru/games/sdk/v2';
          s.async=true;
          document.head.appendChild(s);
        }
      }catch(_){}}
    )();
  </script>

  <!-- Stacks UMDs are not needed in React build; using npm packages instead -->
  </head>

<body oncontextmenu="return false;">
  <div id="turnLandscape">
    rotate your device
    <img id='rotateIcon' src="/assets/gui/orientation.png" alt="">
  </div>
  <main>

    <div class="wrapper screenRatio">
      <div class="wallet-status">
        <div class="wallet-status-indicator disconnected" id="walletStatusIndicator"></div>
        <div class="wallet-status-text" id="walletStatusText">Disconnected</div>
      </div>
      
      <div class="wallet-address" id="walletAddress">
        <div class="wallet-address-text" id="walletAddressText"></div>
      </div>
      
      <div class="transaction-feedback" id="transactionFeedback">
        <div class="transaction-feedback-text" id="transactionFeedbackText"></div>
        <div class="transaction-feedback-details" id="transactionFeedbackDetails"></div>
      </div>
      
      <div class="loader">
        <div class="loader-logo">
          <img src="/assets/gui/coinquest.png" alt="SkyRun">
        </div>
        <div class="loader-text">Loading SkyRun<span class="loader-dots">...</span></div>
        <div class="loader-progress">
          <div class="loader-progress-bar" id="loaderProgressBar"></div>
        </div>
        <div class="loader-percentage" id="loaderPercentage">0%</div>
        <div class="loader-status" id="loaderStatus">Initializing game assets...</div>
        <div class="loader-spinner">
        <div></div>
        <div></div>
        <div></div>
        </div>
      </div>
      <div class="controlBlock hide">
        Controls
        <img class='controlButton' src="/assets/gui/W.png" alt="">
        <div><img class='controlButton' src="/assets/gui/A.png" alt="">
          <img class='controlButton' src="/assets/gui/S.png" alt="">
          <img class='controlButton' src="/assets/gui/D.png" alt="">
        </div>
      </div>
      <canvas width="0" height="0" class="canvas" id="canvas">
      </canvas>
      <img class="pauseButton button hide" src="/assets/gui/Pause.png" alt="" onclick="PauseToggle(); if(window.clickSound) clickSound.play()">
      <div class="score hide"></div>
      <div class="coins hide">
        <div class="coinsText"></div>
        <img src="/assets/sprites/collect/coin.png" alt="">
      </div>
      
      <!-- Game Stats Display -->
      <div class="gameStats hide">
        <div class="statItem">
          <span class="statLabel">Score:</span>
          <span class="statValue" id="gameScore">0</span>
        </div>
        <div class="statItem">
          <span class="statLabel">Coins:</span>
          <span class="statValue" id="gameCoins">0</span>
        </div>
        <div class="statItem">
          <span class="statLabel">Lives:</span>
          <span class="statValue" id="gameLives">3</span>
        </div>
      </div>

      <div class="leftButtonsBlock hide">
        <img id="mobileLeftButton" ontouchstart="leftPressed = true; this.style.opacity = '0.5'"
          ontouchend="leftPressed = false;  this.style.opacity = '1'" class="mobileControlButt"
          src="/assets/gui/left.png" alt="">
        <img id="mobileRightButton" ontouchstart="rightPressed = true; this.style.opacity = '0.5'"
          ontouchend="rightPressed = false; this.style.opacity = '1'" class="mobileControlButt"
          src="/assets/gui/right.png" alt="">
      </div>

      <div class="rightButtonsBlock hide">
        <img id="mobileUpButton" ontouchstart="jumpBegin(); this.style.opacity = '0.5'"
          ontouchend="this.style.opacity = '1'" class="mobileControlButt" src="/assets/gui/up.png" alt="">
        <img id="mobileDownButton" ontouchstart="slideBegin(); this.style.opacity = '0.5'"
          ontouchend="slideEnd(); this.style.opacity = '1'" class="mobileControlButt"
          src="/assets/gui/down.png" alt="">
      </div>



    </div>
    <div class="pause insideScreenRatio hide">
      PAUSED
      <div class="buttonHolder ">
        <img class='replayButton button' src="/assets/gui/Redo.png" alt="" onclick="Replay(); if(window.clickSound) clickSound.play()">
        <img class="playOnPauseButton button" src="/assets/gui/Play.png" alt=""
          onclick="PauseToggle(); if(window.clickSound) clickSound.play()">
        <img class='homeButton button' src="/assets/gui/Home.png" alt="" onclick="GoToHome(); if(window.clickSound) clickSound.play()">
      </div>
    </div>
    <div class="gameOver insideScreenRatio hide">
      <div class='HIandRecord'></div>
      <div class="score gameOverScore"></div>      
      <div class="gameOverCoinsHolder">
        <div class="gameOverCoins"></div>
          <img class='payForLifeImg' src="/assets/sprites/collect/coin.png" alt="">
     </div>
      <div class="saveMeHolder">
        save me!
        <div class="saveMeButtonsHolder">
          <div id="endGameButton" class="payForLife smallBtn saveBtn" onclick="finalizeGameScore()">
            <span id="endGamebuttonText">END GAME</span>
            <img class='payForLifeImg' src="/assets/sprites/collect/coin.png" alt="">
          </div>
             <div id="saveButton" class="payForLife smallBtn saveBtn" onclick="buyLifeLine()">
              <span id="SaveMebuttonText">Save Me!</span>
            </div>
             <br>
        </div>
        
        
      </div>
      
      <div class="buttonHolder">
        <img class='homeButton button' src="/assets/gui/Home.png" alt="" onclick="GoToHome(); if(window.clickSound) clickSound.play()">
        <img class='replayButton button' src="/assets/gui/Redo.png" alt="" onclick="Replay(); if(window.clickSound) clickSound.play()">
      </div>
    </div>
    <div class="mainMenu mainBg screenRatio">
      <div class="mainMenuSide">
        <ul class="circles">
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
        </ul>
        <div class='mainTitle'>
         SkyRun
        </div>

        <!-- Wallet Connect Button -->
        <button class='connectButton walletDisconnected' onclick="if(typeof window.connectWallet === 'function') { window.connectWallet(); } else { console.log('Wallet not ready yet'); }">
          <img src="/assets/gui/achives.png" alt=""> 
          <span class="walletText">Connect Wallet</span>
        </button>

        <div class="mainMenuButtons">
          <!-- Primary Game Actions -->
          <div class='menuButton playButton' 
          onclick="startGame()">
            <img src="/assets/gui/Play.png" alt="">
            <span>Play</span>
          </div>
          
          <!-- Secondary Menu Options -->
          <div class='menuButton achievementsButton' 
          onclick="toggleHide(achivesBlock); if(window.clickSound) clickSound.play()">
              <img src="/assets/gui/achives.png" alt=""> 
            <span>Achievements</span>
          </div>
          
          <div class='menuButton storeButton' 
          onclick="toggleHide(storeBlock); if(window.clickSound) clickSound.play()">
            <img src="/assets/gui/store.png" alt="">
            <span>Store</span>
            </div>
          
          <div class='menuButton settingsButton' 
          onclick="toggleHide(settingsPanel); if(window.clickSound) clickSound.play()">
            <img src="/assets/gui/settings.png" alt="">
            <span>Settings</span>
          </div>
          
        </div>
        <!-- Enhanced Stats Section -->
        <div class="mainLeftInfo">
          <div class="statsContainer">
            <div class="statCard highScoreCard">
            <img id='prizeImg' src="/assets/gui/prize.png" alt="Prize icon">
              <div class="statContent">
                <div class="statLabel">High Score</div>
            <div class='HighScoreBlock mainStatText'></div>
          </div>
            </div>
            
            <div class="statCard coinsCard">
            <img id='coinImg' src="/assets/sprites/collect/coin.png" alt="Coin icon">
              <div class="statContent">
                <div class="statLabel">Total Coins</div>
            <div class='mainCoinsText mainStatText'></div>
              </div>
            </div>
            
            <div class="statCard gamesPlayedCard">
              <img src="/assets/gui/games-played.png" alt="Games Played icon">
              <div class="statContent">
                <div class="statLabel">Games Played</div>
                <div class='gamesPlayedText mainStatText'>0</div>
              </div>
            </div>
            
            <div class="statCard levelCard">
              <img src="/assets/gui/level.png" alt="Level icon">
              <div class="statContent">
                <div class="statLabel">Level</div>
                <div class='levelText mainStatText'>1</div>
              </div>
            </div>
          </div>
        </div>


        <div class="rightTopBlock">
          <img class='smallBtn soundBtn' onclick="mutePage(); if(window.clickSound) clickSound.play()" alt="">
          <img class='smallBtn settingsBtn' src="/assets/gui/achives.png" onclick="toggleHide(settingsPanel); if(window.clickSound) clickSound.play()" alt="">
          <img class='smallBtn rewardsBtn' src="/assets/gui/prize.png" onclick="toggleHide(rewardsBlock); if(window.clickSound) clickSound.play()" alt="">
        </div>

      </div>
    </div>
    <div class="tutorial  hide"></div>
    <div class="settingsPanel mainBg screenRatio hide">
      <div class="statsHolder">
        <div class="stat">Audio: Enabled</div>
        <div class='stat'>Graphics: High</div>
        <div class='stat'>Controls: WASD</div>
      </div>
      <div class="settingsHolder">
        <div class="settingBlock">
          <img class='settingImg' src="/assets/gui/soundOn.png" alt="">
          <div class='settingText'>
            <p>Audio Settings</p>
            Master Volume: 80%
          </div>
          <div class="settingControl">
            <input type="range" id="masterVolume" min="0" max="100" value="80" class="volumeSlider">
            <button class='settingBtn' onclick="mutePage(); if(window.clickSound) clickSound.play()">Toggle Mute</button>
          </div>
        </div>
        
        <div class="settingBlock">
          <img class='settingImg' src="/assets/gui/achives.png" alt="">
          <div class='settingText'>
            <p>Graphics Settings</p>
            Visual Effects: High Quality
                </div>
          <div class="settingControl">
            <div class="toggleRow">
              <span>Particles</span>
              <div class="toggleSwitch">
                <input type="checkbox" id="particlesToggle" checked>
                <span class="slider"></span>
              </div>
            </div>
            <div class="toggleRow">
              <span>Screen Shake</span>
              <div class="toggleSwitch">
                <input type="checkbox" id="screenShakeToggle" checked>
                <span class="slider"></span>
              </div>
            </div>
                </div>
        </div>
        
        <div class="settingBlock">
          <img class='settingImg' src="/assets/gui/left.png" alt="">
          <div class='settingText'>
            <p>Game Controls</p>
            WASD + Arrow Keys
              </div>
              <div class="settingControl">
                <div class="controlsDisplay">
                  <span class="controlKey">W</span>
                  <span class="controlKey">A</span>
                  <span class="controlKey">S</span>
                  <span class="controlKey">D</span>
                </div>
            <div class="toggleRow">
              <span>Mobile Controls</span>
              <div class="toggleSwitch">
                <input type="checkbox" id="mobileControlsToggle" checked>
                <span class="slider"></span>
              </div>
            </div>
              </div>
            </div>
            
        <div class="settingBlock">
          <img class='settingImg' src="/assets/gui/wallet.png" alt="">
          <div class='settingText'>
            <p>Wallet Connection</p>
            Blockchain Integration
          </div>
          <div class="settingControl">
            <div id="walletStatus" class="walletStatus">Not Connected</div>
            <button class='settingBtn' onclick="if(typeof window.connectWallet === 'function') { window.connectWallet(); } else { console.log('Wallet not ready yet'); }">Connect Wallet</button>
                </div>
        </div>
        
        <div class="settingBlock">
          <img class='settingImg' src="/assets/gui/wallet.png" alt="">
          <div class='settingText'>
            <p>Wallet Management</p>
            Blockchain connection
              </div>
              <div class="settingControl">
                <div id="walletStatus" class="walletStatus">Not Connected</div>
            <button class='settingBtn' onclick="if(typeof window.connectWallet === 'function') { window.connectWallet(); } else { console.log('Wallet not ready yet'); }">Connect Wallet</button>
            <button class='settingBtn' onclick="disconnectWallet(); if(window.clickSound) clickSound.play()">Disconnect</button>
          </div>
        </div>
        
        <div class="settingBlock">
          <img class='settingImg' src="/assets/gui/settings.png" alt="">
          <div class='settingText'>
            <p>Game Preferences</p>
            Auto-save & Tutorials
          </div>
          <div class="settingControl">
            <div class="toggleRow">
              <span>Auto-Save</span>
              <div class="toggleSwitch">
                <input type="checkbox" id="autoSaveToggle" checked>
                <span class="slider"></span>
              </div>
            </div>
            <div class="toggleRow">
              <span>Tutorial</span>
              <div class="toggleSwitch">
                <input type="checkbox" id="tutorialToggle" checked>
                <span class="slider"></span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="settingBlock">
          <img class='settingImg' src="/assets/gui/achives.png" alt="">
          <div class='settingText'>
            <p>Performance</p>
            Frame Rate & Quality
          </div>
          <div class="settingControl">
            <select class="settingSelect" id="frameRateSelect">
              <option value="30">30 FPS</option>
              <option value="60" selected>60 FPS</option>
              <option value="120">120 FPS</option>
            </select>
            <select class="settingSelect" id="qualitySelect">
              <option value="low">Low Quality</option>
              <option value="medium">Medium Quality</option>
              <option value="high" selected>High Quality</option>
            </select>
          </div>
        </div>
        
        <div class="settingBlock">
          <img class='settingImg' src="/assets/gui/success.png" alt="">
          <div class='settingText'>
            <p>Reset Settings</p>
            Restore to defaults
          </div>
          <div class="settingControl">
            <button class='settingBtn resetBtn' onclick="resetSettings(); if(window.clickSound) clickSound.play()">Reset All</button>
            <button class='settingBtn saveBtn' onclick="saveSettings(); if(window.clickSound) clickSound.play()">Save Settings</button>
          </div>
        </div>
      </div>
      
      <div class="return-btn-holder">
        <button class='btn return-btn' onclick="toggleHide(settingsPanel); if(window.clickSound) clickSound.play()">
          ← Back to Menu
        </button>
      </div>
    </div>
    <div class="rewards mainBg screenRatio hide">
      <div class="statsHolder">
        <div class="stat">Last Score: <span id="lastScoreText">0</span></div>
        <div class='stat'>Coins Earned: <span id="lastCoinsText">0</span></div>
        <div class='stat'>Status: Ready to Claim</div>
      </div>
      <div class="rewardsHolder">
        <div class="rewardBlock">
          <img class='rewardImg' src="/assets/sprites/collect/coin.png" alt="">
          <div class='rewardText'>
            <p>Coins Earned</p>
            Last run collection
          </div>
          <div class="rewardControl">
            <div class="rewardValue" id="coinsValue">0 coins</div>
            <div class="rewardStatus">Ready to claim</div>
          </div>
        </div>
        
        <div class="rewardBlock">
          <img class='rewardImg' src="/assets/gui/achives.png" alt="">
          <div class='rewardText'>
            <p>Score Achieved</p>
            Final game score
          </div>
          <div class="rewardControl">
            <div class="rewardValue" id="scoreValue">0 points</div>
            <div class="rewardStatus">Ready to claim</div>
              </div>
            </div>
            
        <div class="rewardBlock">
          <img class='rewardImg' src="/assets/gui/wallet.png" alt="">
          <div class='rewardText'>
            <p>Wallet Connection</p>
            Blockchain integration
          </div>
          <div class="rewardControl">
            <div id="walletRewardStatus" class="walletRewardStatus">Not Connected</div>
            <button class='rewardBtn' onclick="if(typeof window.connectWallet === 'function') { window.connectWallet(); } else { console.log('Wallet not ready yet'); }">Connect Wallet</button>
              </div>
        </div>
        
        <div class="rewardBlock">
          <img class='rewardImg' src="/assets/gui/success.png" alt="">
          <div class='rewardText'>
            <p>Claim Rewards</p>
            Send to wallet address
          </div>
          <div class="rewardControl">
            <button class='rewardBtn claimBtn' id="claimLastRunBtn" onclick="claimLastRun(); if(window.clickSound) clickSound.play()">Claim All Rewards</button>
            <div class="claimInfo">Requires wallet connection</div>
            </div>
          </div>
          
        <div class="rewardBlock">
          <img class='rewardImg' src="/assets/gui/achives.png" alt="">
          <div class='rewardText'>
            <p>Transaction History</p>
            View past claims
            </div>
          <div class="rewardControl">
            <button class='rewardBtn historyBtn' onclick="viewTransactionHistory(); if(window.clickSound) clickSound.play()">View History</button>
            <div class="historyInfo">Track your rewards</div>
          </div>
        </div>
        
        <div class="rewardBlock">
          <img class='rewardImg' src="/assets/gui/settings.png" alt="">
          <div class='rewardText'>
            <p>Reward Settings</p>
            Configure preferences
          </div>
          <div class="rewardControl">
            <button class='rewardBtn settingsBtn' onclick="openRewardSettings(); if(window.clickSound) clickSound.play()">Settings</button>
            <div class="settingsInfo">Auto-claim options</div>
          </div>
          </div>
        </div>
        
        <div class="return-btn-holder">
          <button class='btn return-btn' onclick="toggleHide(rewardsBlock); if(window.clickSound) clickSound.play()">
            ← Back to Game
          </button>
      </div>
    </div>
    <div class="achives mainBg screenRatio hide">
      <div class="statsHolder">
        <div class="stat" id="numberOfDeathsBlock"></div>
        <div class='stat ' id="numberOfJumpsBlock"></div>
        <div class='stat' id="numberOfslidesBlock"></div>
      </div>
      <div class="achivesHolder">
        <div class="achiveBlock lock" data-achievement="pioneer"><img class='achiveImg' src="/assets/gui/pioneer.png" alt="">
          <div class='achiveText'>
            <p>Pioneer</p>
            Run 1000 meters
            <div class="progressBar">
              <div class="progressFill" data-progress="pioneer"></div>
            </div>
          </div>
        </div>
        <div class="achiveBlock lock" data-achievement="bomb"><img class='achiveImg' src="/assets/gui/bomb.png" alt="">
          <div class='achiveText'>
            <p>Bomb Runner</p>
            Run 5000 meters
            <div class="progressBar">
              <div class="progressFill" data-progress="bomb"></div>
            </div>
          </div>
        </div>
        <div class="achiveBlock lock" data-achievement="motorbike"><img class='achiveImg' src="/assets/gui/motorbike.png" alt="">
          <div class='achiveText'>
            <p>Speed Demon</p>
            Run 10000 meters
            <div class="progressBar">
              <div class="progressFill" data-progress="motorbike"></div>
            </div>
          </div>
        </div>
        <div class="achiveBlock lock"><img class='achiveImg' src="/assets/gui/trees.png" alt="">
          <div class='achiveText'>
            <p>Run forest, run</p>
            Score 750 points
          </div>
        </div>
        <div class="achiveBlock lock"><img class='achiveImg' src="/assets/gui/gigachad.png" alt="">
          <div class='achiveText'>
            <p>Gigachad</p>
            Score 1000 points
          </div>
        </div>
        <div class="achiveBlock lock"><img class='achiveImg' src="/assets/gui/dead cat.png" alt="">
          <div class='achiveText'>
            <p>Puss in boots</p>
            Die 8 times
          </div>
        </div>
        <div class="achiveBlock lock"><img class='achiveImg' src="/assets/gui/guitar.png" alt="">
          <div class='achiveText'>
            <p>Smells like Nirvana</p>
            Die 27 times
          </div>
        </div>
        <div class="achiveBlock lock"><img class='achiveImg' src="/assets/gui/earth.png" alt="">
          <div class='achiveText'>
            <p>Main question</p>
            Die 42 times
          </div>
        </div>
        <div class="achiveBlock lock"><img class='achiveImg' src="/assets/gui/skull.png" alt="">
          <div class='achiveText'>
            <p>Memento mori</p>
            Die 100 times
          </div>
        </div>
        <div class="achiveBlock lock"><img class='achiveImg' src="/assets/gui/bouncer.png" alt="">
          <div class='achiveText'>
            <p>Bouncer</p>
            Jump 500 times
          </div>
        </div>
        <div class="achiveBlock lock"><img class='achiveImg' src="/assets/gui/slide.png" alt="">
          <div class='achiveText'>
            <p>On the ground</p>
            Slide under barriers 300 times
          </div>
        </div>
        <div class="achiveBlock lock"><img class='achiveImg' src="/assets/sprites/collect/shieldIcon.png" alt="">
          <div class='achiveText'>
            <p>S.H.I.E.L.D.</p>
            Upgrade shield to max
          </div>
        </div>
        <div class="achiveBlock lock"><img class='achiveImg' src="/assets/sprites/collect/boosterIcon.png" alt="">
          <div class='achiveText'>
            <p>Flash</p>
            Upgrade booster to max
          </div>
        </div>
        <div class="achiveBlock lock"><img class='achiveImg' src="/assets/sprites/collect/coin.png" alt="">
          <div class='achiveText'>
            <p>Uncle Pennybags</p>
            Earn 1000 coins
          </div>
        </div>
        <div class="achiveBlock lock"><img class='achiveImg' src="/assets/gui/success.png" alt="">
          <div class='achiveText'>
            <p>All for one</p>
            Unlock all achives
          </div>
        </div>
      </div>
      <div class="return-btn-holder">
        <button class='btn return-btn' onclick="toggleHide(achivesBlock); if(window.clickSound) clickSound.play()">
          Return
        </button>
      </div>
    </div>
    <div class="store mainBg screenRatio hide">
      <div class="storeHolder">
        <div class="storeBack"></div>
        <div class="storeCoins">
          <div class="storeCoinsText"></div>
          <img src="/assets/sprites/collect/coin.png" alt="">
        </div>
          <img class='addBtn' src="/assets/gui/add.png" alt=""
            onclick="showRevawardVideo(addCoins); if(window.clickSound) clickSound.play()"><br>
        <div class="upgradesWrapper">
          <div class="upgrade">
            <div class="shieldUpgradeHolder">
              Shield
              <div class="upgradeHolder">
                <img src="/assets/sprites/collect/shieldIcon.png" alt="">
                <div class="upgradeProgress">
                  <div class="upgradeLevel shieldLevel"></div>
                  <div class="upgradeLevel shieldLevel"></div>
                  <div class="upgradeLevel shieldLevel"></div>
                  <div class="upgradeLevel shieldLevel"></div>
                </div>
              </div>
            </div>
            <div class="upgradeBtn smallBtn" onclick="Upgrade('shield')">
              <div class="upgradeBtnContent">
                <div class="shieldCost"></div>
                <img src="/assets/sprites/collect/coin.png" class="upgradeCoinImg" alt="">
              </div>
            </div>
          </div>
          <div class="upgrade">
            <div class="boosterUpgradeHolder">
              Booster
              <div class="upgradeHolder">
                <img src="/assets/sprites/collect/boosterIcon.png" alt="">
                <div class="upgradeProgress">
                  <div class="upgradeLevel boosterLevel"></div>
                  <div class="upgradeLevel boosterLevel"></div>
                  <div class="upgradeLevel boosterLevel"></div>
                  <div class="upgradeLevel boosterLevel"></div>
                </div>
              </div>
            </div>
            <div class="upgradeBtn smallBtn" onclick="Upgrade('booster')">
              <div class="upgradeBtnContent">
                <div class="boosterCost"></div>
                <img src="/assets/sprites/collect/coin.png" class="upgradeCoinImg" alt="">
              </div>
            </div>
          </div>

        </div>
      </div>
      <button class='btn return-btn store-return-btn' onclick="toggleHide(storeBlock); if(window.clickSound) clickSound.play()">
        Return
      </button>

  </main>

  <!-- Legacy vanilla scripts from public/scripts -->
  <script>
    // Prevent script loading conflicts
    if (typeof window.scriptLoaded === 'undefined') {
      window.scriptLoaded = {};
    }
    
    // Enhanced error handling for external script conflicts
    window.addEventListener('error', function(e) {
      // Handle external script conflicts (browser extensions)
      if (e.message.includes('observer') && e.filename.includes('content.js')) {
        console.warn('🔧 External script conflict detected (browser extension):', e.message);
        console.warn('💡 This is likely caused by a browser extension. Your game should still work normally.');
        e.preventDefault();
        return false;
      }
      
      // Handle StacksProvider conflicts
      if (e.message.includes('StacksProvider') && e.message.includes('Cannot redefine property')) {
        console.warn('🔧 Stacks wallet extension conflict detected:', e.message);
        console.warn('💡 This is caused by multiple Stacks wallet extensions. Your game should still work normally.');
        e.preventDefault();
        return false;
      }
      
      // Handle other external script conflicts
      if (e.filename && (e.filename.includes('extension') || e.filename.includes('content_script'))) {
        console.warn('🔧 Browser extension script error:', e.message);
        e.preventDefault();
        return false;
      }
      
      // Log other errors for debugging but don't prevent them
      if (e.filename && !e.filename.includes(window.location.hostname)) {
        console.warn('⚠️ External script error:', e.message, 'from', e.filename);
      }
    });
    
    // Script isolation to prevent conflicts
    (function() {
      'use strict';
      
      // Store original console methods
      const originalConsoleError = console.error;
      const originalConsoleWarn = console.warn;
      
      // Override console.error to filter external script errors
      console.error = function(...args) {
        const message = args.join(' ');
        if (message.includes('observer') && message.includes('content.js')) {
          console.warn('🔧 Filtered external script error:', message);
          return;
        }
        if (message.includes('StacksProvider') && message.includes('Cannot redefine property')) {
          console.warn('🔧 Filtered Stacks wallet extension conflict:', message);
          return;
        }
        originalConsoleError.apply(console, args);
      };
      
      // Override console.warn to filter external script warnings
      console.warn = function(...args) {
        const message = args.join(' ');
        if (message.includes('observer') && message.includes('content.js')) {
          return; // Suppress these warnings
        }
        originalConsoleWarn.apply(console, args);
      };
    })();
    
    // User-friendly notification about browser extensions
    setTimeout(() => {
      if (window.location.protocol === 'file:' || window.location.hostname === 'localhost') {
        console.log('🎮 SkyRun Loaded Successfully!');
        console.log('💡 If you see any "observer" or "StacksProvider" errors above, they are from browser extensions and won\'t affect your game.');
        console.log('🔧 To disable these errors, try running the game in incognito mode or disable browser extensions.');
      }
    }, 2000);
  </script>
  <script src="/scripts/howler.core.js"></script>
  <script src="/scripts/PxLoader.js"></script>
  <script src="/scripts/PxLoaderImage.js"></script>
  <script src="/scripts/yandexScripts.js"></script>
  <script src="/scripts/vars.js"></script>
  <script src="/scripts/loader.js"></script>
  <script src="/scripts/particles.js"></script>
  <script src="/scripts/screenShake.js"></script>
  <script src="/scripts/powerUps.js"></script>
  <script src="/scripts/dynamicBackgrounds.js"></script>
  <script src="/scripts/soundEffects.js"></script>
  <script src="/scripts/game.js"></script> <!-- Re-enabled for button functionality -->
  <script src="/scripts/walletBridge.js"></script>
  <script src="/scripts/uiEnhancements.js"></script>
  <script src="/scripts/achievements.js"></script>
  <script src="/scripts/difficulty.js"></script>
  <script src="/scripts/effects.js"></script>

  <!-- React bundle -->
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>

</html>
